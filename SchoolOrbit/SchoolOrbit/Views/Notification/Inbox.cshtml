@model IEnumerable<DomainModel.BusinessLayer.msgNotification>

@{
    ViewBag.Title = "Inbox";
    if (UserDetails.Current.role_name == "Admin")
    {
        Layout = "~/Views/Shared/_Layout.cshtml";
    }
    else
    {
        Layout = "~/Views/Shared/_Parent.cshtml";
    }
}

<section class="content-header">
    <h1>
        Mailbox      
    </h1>
    <ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
        <li class="active">Mailbox</li>
    </ol>
    </section>


<section class="content">
    <div class="row">
        
        <div class="col-md-12">
            <div class="box box-primary">
                <div class="box-header with-border">
                   <a href="~/Notification/Compose"  class="btn btn-default btn-sm"><i class="fa fa-plus"></i> Compose</a>
                </div><!-- /.box-header -->
                <div class="table-responsive mailbox-messages">
                    <table class="table table-bordered table-striped" id="msg">
                        <thead>
                            <tr>
                                <th>
                                    <button class="btn btn-default btn-sm checkbox-toggle"><i class="fa fa-square-o"></i></button>
                                </th>
                                <th>
                                    @Html.DisplayNameFor(model => model.sentByName)
                                </th>

                                <th>
                                    @Html.DisplayNameFor(model => model.subject)
                                </th>
                                <th>
                                    @Html.DisplayNameFor(model => model.ts_entered)
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Model)
                            {
                                if (item.is_read == false)
                                {
                                    <tr style="font-weight:bold">
                                        <td>
                                            <input type="checkbox" cval="@item.id" />
                                        </td>
                                        <td>
                                            @Html.ActionLink(item.sentByName, "Details", new { id = item.id, iobox = 1 })
                                        </td>

                                        <td>
                                            @Html.ActionLink(item.subject, "Details", new { id = item.id, iobox = 1 })
                                        </td>

                                        <td>
                                            @Html.DisplayFor(modelItem => item.ts_entered)
                                        </td>
                                    </tr>

                                }
                                else
                                {
                                    <tr>
                                        <td>
                                            <input type="checkbox" cval="@item.id"/>                                        
                                        </td>
                                        <td>
                                            @Html.ActionLink(item.sentByName, "Details", new { id = item.id ,iobox=1 })
                                        </td>

                                        <td>
                                            @Html.ActionLink(item.subject, "Details", new { id = item.id, iobox = 1 })
                                        </td>

                                        <td>
                                            @Html.DisplayFor(modelItem => item.ts_entered)
                                        </td>
                                    </tr>
                                }
                            }
                        </tbody>
                    </table>
                </div>
                    @*<div class="box-body no-padding">
                <div class="mailbox-controls">
                    <!-- Check all button -->

                    <div class="btn-group">
                        <button class="btn btn-default btn-sm"><i class="fa fa-trash-o"></i></button>
                        <button class="btn btn-default btn-sm"><i class="fa fa-reply"></i></button>
                        <button class="btn btn-default btn-sm"><i class="fa fa-share"></i></button>
                    </div><!-- /.btn-group -->
                    <button class="btn btn-default btn-sm"><i class="fa fa-refresh"></i></button>
                    <div class="pull-right">
                        1-10
                        <div class="btn-group">
                            <button class="btn btn-default btn-sm"><i class="fa fa-chevron-left"></i></button>
                            <button class="btn btn-default btn-sm"><i class="fa fa-chevron-right"></i></button>
                        </div><!-- /.btn-group -->
                    </div><!-- /.pull-right -->
                </div>
                <div class="table-responsive mailbox-messages">
                    <table class="table table-hover table-striped">
                    <thead>
                        <tr>
                            <th><button class="btn btn-default btn-sm checkbox-toggle"><i class="fa fa-square-o"></i></button></th>
                            <th><a href="#">From</a></th>
                            <th><a href="#">Subject</a></th>
                            <th></th>
                            <th><a href="#">Date</a></th>
                        </tr>
                    </thead>
                        <tbody>
                            <tr>
                                <td><input type="checkbox" /></td>

                                <td class="mailbox-name"><a href="#">Vinod Alladi</a></td>
                                <td class="mailbox-subject"><b>Home Work</b> - To do ...</td>
                                <td class="mailbox-attachment"></td>
                                <td class="mailbox-date">5 mins ago</td>
                            </tr>
                            <tr>
                                <td><input type="checkbox" /></td>

                                <td class="mailbox-name"><a href="#">Jay C</a></td>
                                <td class="mailbox-subject"><b>Pics</b> - </td>
                                <td class="mailbox-attachment"><i class="fa fa-paperclip"></i></td>
                                <td class="mailbox-date">28 mins ago</td>
                            </tr>
                            <tr>
                                <td><input type="checkbox" /></td>

                                <td class="mailbox-name"><a href="#">Shashi</a></td>
                                <td class="mailbox-subject"><b>School is closed - 15th Aug 2015.</b></td>
                                <td class="mailbox-attachment"><i class="fa fa-paperclip"></i></td>
                                <td class="mailbox-date">11 hours ago</td>
                            </tr>
                            <tr>
                                <td><input type="checkbox" /></td>

                                <td class="mailbox-name"><a href="#">Bhanu </a></td>
                                <td class="mailbox-subject"><b>Add New Employee - Shruthi </b> </td>
                                <td class="mailbox-attachment"></td>
                                <td class="mailbox-date">15 hours ago</td>
                            </tr>
                            <tr>
                                <td><input type="checkbox" /></td>

                                <td class="mailbox-name"><a href="#">Ranjit</a></td>
                                <td class="mailbox-subject"><b>Reg: School Website</b> - </td>
                                <td class="mailbox-attachment"><i class="fa fa-paperclip"></i></td>
                                <td class="mailbox-date">Yesterday</td>
                            </tr>

                        </tbody>
                    </table><!-- /.table -->
                </div><!-- /.mail-box-messages -->
            </div>*@<!-- /.box-body -->
                    <div class="box-footer no-padding">
                        <div class="mailbox-controls">
                            <!-- Check all button -->
                            <button class="btn btn-default btn-sm checkbox-toggle"><i class="fa fa-square-o"></i></button>
                            <div class="btn-group">
                                <button class="btn btn-default btn-sm" id="btnDelete"><i class="fa fa-trash-o"></i></button>
                                @*<button class="btn btn-default btn-sm"><i class="fa fa-reply"></i></button>
                                <button class="btn btn-default btn-sm"><i class="fa fa-share"></i></button>*@
                            </div><!-- /.btn-group -->
                            <button class="btn btn-default btn-sm" id="btnRefresh"><i class="fa fa-refresh"></i></button>                           
                        </div>
                    </div>
                </div><!-- /. box -->
        </div><!-- /.col -->
    </div><!-- /.row -->
</section><!-- /.content -->
<script>
      $(function () {
        //Enable iCheck plugin for checkboxes
          //iCheck for checkbox and radio inputs




        $('.mailbox-messages input[type="checkbox"]').iCheck({
          checkboxClass: 'icheckbox_flat-blue',
          radioClass: 'iradio_flat-blue'
        });

        //Enable check and uncheck all functionality
        $(".checkbox-toggle").click(function () {
          var clicks = $(this).data('clicks');
          if (clicks) {
            //Uncheck all checkboxes
            $(".mailbox-messages input[type='checkbox']").iCheck("uncheck");
            $(".fa", this).removeClass("fa-check-square-o").addClass('fa-square-o');
          } else {
            //Check all checkboxes
            $(".mailbox-messages input[type='checkbox']").iCheck("check");
            $(".fa", this).removeClass("fa-square-o").addClass('fa-check-square-o');
          }
          $(this).data("clicks", !clicks);
        });

        $("#btnDelete").click(function () {
            var strIds = "";
            $(".mailbox-messages input[type='checkbox']:checked").each(function () {
                strIds = strIds + $(this).attr("cval") + ",";
            });
           // alert(strIds);
            if (strIds != "") {
               $.get("@Url.Action("DeleteMsg")",
               {
                   strIds: strIds,
                   ioBox: "1"
               });
            }
        });
        $("#btnRefresh").click(function () {
            window.location.href = "/Notification/Inbox";
        });

      });
      $(document).ready(function () {
          $("#msg").DataTable({
          });
      });


</script>
    @*<div>
        <h4>Notification</h4>
        <hr />
        <dl class="dl-horizontal">
            <dt>
                @Html.DisplayNameFor(model => model.idSchool)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.idSchool)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.To)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.To)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.Body)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.Body)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.subject)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.subject)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.sentBy)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.sentBy)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.is_active)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.is_active)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.ts_entered)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.ts_entered)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.ts_updated)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.ts_updated)
            </dd>

        </dl>
    </div>
    <p>
        @Html.ActionLink("Edit", "Edit", new { id = Model.id }) |
        @Html.ActionLink("Back to List", "Index")
    </p>*@
